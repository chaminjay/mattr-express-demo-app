<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <body>
    <main
      class="d-flex flex-column align-items-center justify-content-center bg-dark vh-100"
    >
      <div class="text-center">
        <%- include("./partials/spinner.ejs") %>
        <p class="text-light p-4">Waiting for a Customer</p>
        <button
          class="btn btn-outline-primary btn-sm"
          onclick="handleBillingBtn()"
        >
          Go to billing
        </button>
      </div>
    </main>

    <!-- bootstrap js -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script>
      const user = sessionStorage.getItem("authUser");
      if (user) {
        location.replace("/billing");
      }

      function handleBillingBtn() {
        location.replace("/billing");
      }

      function listenForVerification() {
        var checkStatus = setInterval(function () {
          const user = localStorage.getItem("authUser");
          if (user) {
            location.replace("/billing");
            clearInterval(checkStatus);
          }
        }, 1000);
      }

      listenForVerification();
    </script>
  </body>
</html>
